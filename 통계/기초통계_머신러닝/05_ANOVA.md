# 통계및머신러닝
## 5) ANOVA ( 분산분석 )
- ANOVA 는 2개 이상의 집단에 대한 비교를 수행하기 위한 검정이다
- 집단 내의 분산, 총편균 등 집단 간 분산의 비교를 통해 만들어진 F분포를 이용하여 가설검정을 하는 방법이다
- 귀무가설은 모든 그룹의 평균이 같다이며 대립가설은 어떤 그룹의 평균은 같지 않다 이다
- 분산 분석의 가정은 k개 그룹의 자료는 unbias 되어 있고 모집단을 잘 대표하며 정규분포하고 모두 등분산이라는 것이다
- 전체 분산은 두 개의 독립적인 분산으로 구성되어 있다
- 전체제곱합(SST) = 그룹내 변동 (SSE) + 그룹간 변동 (SSTR)
- 총변동성 = (Y 관측치 - 표본평균)제곱(그룹별 모두 합산) + (각 그룹 평균 - 전체평균) 제곱
- 그룹간차이분이 클수록 그룹간 변동이 커지고 그룹내 변동은 작아지며 그룹간 차이분이 작을수록 그룹간 변동은 작이고 그룹내 변동은 커진다
- F = MSTR/MSE = SSTR/(k-1) / SSE/(n-k) = 그룹간변동/각 그룹내 변동
- F검정통계량 을 비교하여 p-value < a 이면 귀무가설을 기각한다
- 귀무가설이 기각된 경우 어떤 그룹 평균이 다른지는 알 수 없으므로 사후검정이 필요하다
  - 사후검정에는 Tukey, Bonferroni, Scheffe, Duncan 이 있다
- 이원, 다원분산분석은 factor 의 개수가 여러개인 실험을에 대한 분석을 말한다
- two way ANOVA 분석은 상호작용 효과를 관찰하기 위해 사용한다
- 상관분석은 연속형 두 변수간의 직선적 관계정도를 검정하는 방법이다
- 상관계수는 직선적 관계를 계량적으로 수치화한 것으로 계량적인 객관성이 필요하여 도입됐다
  - 두 변수 사이의 상관관계 정도를 나타내는 수치이다
  - 절대값이 1에 가까울수록 강한 상관관계를 의미한다
  - 0은 연관성이 없다, 독립적이다

- 피어슨 상관계수는 상관계쑤를 찾는 방법 중 대표적이며 귀무가설은 두 변수는 상관관계가 없다는 것이다
- 스피어만 상관계쑤는 서열척도인 두 변수들의 상관관계를 측정한다
- 켄달 상관계수는 순위에 대한 심사위원의 개념으로 일치하는 정도로 상관계수를 정의한다
- 상관계수는 인과관계를 의미하는 것이 아니며 이를 통해 기울기를 알 수 없다
- 켄달 상관계수는 1에 가까울수록 비슷하다고 판단할 수 있다

## 6) 회귀분석
### 선형 회귀분석
- 선형회귀분석은 예측만이 아니라 설명도 가능하다
- 선형회귀분석은 항상 오차인 엡실론이 있다고 가정하며 오차를 최소화하는 방향으로 한다
- 오차를 최소가 되도록 알파와 베타를 추정하는 방법을 최소제곱법이라 하고 이때 얻어지는 알파, 베타의 추정량을 최소제곱추정량 이라고 한다
- 성능이 좋은 회귀분석 모델은 오차가 작을수록 좋은데, 이때 오차제곱합이 작은 것을 고르면 된다
- 선형회귀분석에서 귀무가설은 X 변수와 Y 변수는 선형관계가 없다는 것이다
- F 검정은 선형관계에서 기울기 존재유무(선형관계성립여부) 를 판단하며 이를 회귀 모형의 통계적 유의성을 검정한다고 한다
- t 검정은 개별 독립변수 중 어느 독립변수가 종속변수에 유의미한 영향을 (큰) 주는지 검정하는 것이다
- 선형회귀분석은 선형성, 정규성, 등분산성, 독립성을 가정하는데 여기서 정규성, 등분산성, 독립성은 e(오차) 에 관련된 가정이다
- 회귀모형에서 실제 오차를 측정하기 어렵기 때문에 (모집단의 진짜 회귀식을 모르므로) 오차항의 추정치로서 잔차를 사용한다
- 선형성 가정에 대한 검토는 산점도, 상관계수, 회귀계수 베타 (F 검정 실시) 에 대한 검정을 통해 검토한다
- 독립성 가정은 오차는 임의변수로서 독립적이며 동일하게 분포하는 확률분포라는 것이다
  - 독립성 가정이 성립하지 않는 경우는, 중요한 설명변수가 누락되거나 회귀식이 적절치 않거나 다중공선성이 존재하는 경우이다
  - 독립성 가정에 대한 검토는 예측값 대 잔차 산점도 와 Durbin-Watson test 로 한다
- 정규성은 오차가 모두 평균이 0 이고 분산이 시그마 제곱인 정규분포라는 것이다
  - 정규성 가정이 성립하지 않으면 F-test 를 활용한 회귀식 검정, 예측값에 대한 신뢰구간 검정 등을 신뢰성있게 수행할 수 없다
  - 정규성은 산점도, 히스토그램, Q-Q plot, 잔차에 대한 왜도 및 첨도 검토를 통해 진행한다
- 등분산성은 분산 시그마제곱이 모든 x 에 대하여 일정한 상수라는 것이다
  - 등분산성 가정 검토는 예측값 대 잔차 산점도, 등분산성 검정으로 한다
- 선형성 이슈에 대한 대응 방법은 데이터 변환, 다항회귀(독립변수가 여러개로 구성된 회귀모형), 일반화 가법 모형 (변환함수 사용)이 있다
- 정규성 이슈에 대한 대응 방법은 데이터 변환, 일반화 선형 모형 (종속변수에 변환함수를 적용 - Link Function) 이 있다
- 등분산성 이슈는 데이터 변환, 가중선형회귀(오차제곱의 역수를 사용하여 이상치의 가중을 줄임) 로 대응한다
- 독립성 이슈에는 데이터 변환, 자기 회귀모델로 대응한다
- 이상치 이슈에는 데이터 변환, Robust 회귀 (잔차의 제곱 대신 절대값의 합이 최소가 되도록 계수를 추정 - 미분 사용 불가),
Quantile 회귀 (특정 분위 값들로 회귀선을 여러개 만들어 선택) 로 대응한다
- 다중공선성 (독립변수 간 강한 상관관계) 이슈에는 Feature Engineering(데이터선별), Ridge Regression(가중치조절), LASSO(삭제), Elastic Net (가중치조절 혹은 삭제)
PCR (독립변수 분산을 최대로 하는 축으로 전사), PLS (종속변수와 독립변수의 관계를 가장 잘설명하는 축으로 전사, 변형) 으로 대응한다
- 회귀 변수의 유의성 검정은 t 검정을 통해 할 수 있다